<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Submit Your Vibe</title>
</head>
<body style="background: #111; color: #fff; font-family: sans-serif; padding: 2em; text-align: center;">
  <h1>🌌 Submit Your Vibe</h1>

  <label for="category">Pick a Category:</label>
  <select id="category">
    <option value="vibes">Vibe</option>
    <option value="palettes">Colors</option>
    <option value="songs">Song</option>
    <option value="objects">Thing</option>
    <option value="affirmations">Note</option>
  </select>

  <br><br>

  <input type="text" id="entry" placeholder="Your vibe idea..." style="width: 300px; padding: 0.5em;" />
  <br><br>
  <button id="submitBtn" style="padding: 0.75em 1.5em;">✨ Send It</button>

  <p id="status" style="margin-top: 1em;"></p>

  <script type="module">
    // Import Firebase functions
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-analytics.js";
    import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-database.js";

    // Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyBco-Y7JxRfhnLjVbV26EIe-wmBMsnCv3Q",
      authDomain: "vibes-a72a8.firebaseapp.com",
      projectId: "vibes-a72a8",
      storageBucket: "vibes-a72a8.firebasestorage.app",
      messagingSenderId: "427577332493",
      appId: "1:427577332493:web:a383f8b4e228afa20d9644",
      measurementId: "G-JXL378W0ED"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getDatabase(app);

    // Submission handler
    document.getElementById("submitBtn").addEventListener("click", () => {
      const category = document.getElementById("category").value;
      const entry = document.getElementById("entry").value.trim();

      if (!entry) {
        document.getElementById("status").textContent = "Please enter something before submitting!";
        return;
      }

      push(ref(db, "suggestions"), {
        category: category,
        value: entry,
        timestamp: Date.now()
      })
      .then(() => {
        document.getElementById("status").textContent = "✅ Thanks for your vibe!";
        document.getElementById("entry").value = "";
      })
      .catch((error) => {
        document.getElementById("status").textContent = "❌ Error sending vibe: " + error.message;
      });
    });
  </script>
</body>
</html>
